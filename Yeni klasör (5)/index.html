<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MockupLab Admin | Professional POD Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://gumroad.com/js/gumroad.js"></script>
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #fff; }
        .drop-zone { border: 2px dashed #e2e8f0; transition: all 0.3s ease; }
        .drop-zone.active { border-color: #2563eb; background: #eff6ff; }
        .view { display: none; }
        .view.active { display: block; }
        /* Fourthwall Stil Buton */
        .btn-black { background: #000; color: #fff; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; font-size: 12px; padding: 16px; width: 100%; border-radius: 6px; transition: opacity 0.2s; }
        .btn-black:hover { opacity: 0.8; }
    </style>
</head>
<body>

    <nav class="border-b px-8 py-6 flex justify-between items-center sticky top-0 bg-white z-50">
        <div class="font-black text-xl tracking-tighter cursor-pointer" onclick="showPage('home')">MOCKUP<span class="text-blue-600">LAB</span></div>
        <div id="nav-cats" class="hidden md:flex gap-8 text-[11px] font-bold text-gray-400 uppercase tracking-widest"></div>
        <button onclick="showPage('admin')" class="text-[10px] font-bold text-gray-300 hover:text-black transition uppercase">Panel</button>
    </nav>

    <div id="page-home" class="view active">
        <div class="max-w-7xl mx-auto px-8 py-20">
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-12"></div>
        </div>
    </div>

    <div id="page-detail" class="view fixed inset-0 bg-white z-[60] overflow-y-auto">
        <div class="max-w-6xl mx-auto px-8 py-12 relative">
            <button onclick="showPage('home')" class="absolute top-8 right-8 text-3xl font-light">&times;</button>
            <div class="grid lg:grid-cols-2 gap-20">
                <div class="space-y-6">
                    <img id="det-img" src="" class="w-full aspect-[4/5] object-cover rounded-xl bg-gray-50 border">
                    <div id="det-thumbs" class="flex gap-4 overflow-x-auto pb-4"></div>
                </div>
                <div class="py-10">
                    <h2 id="det-title" class="text-4xl font-extrabold tracking-tight mb-2"></h2>
                    <p id="det-price" class="text-2xl text-gray-400 mb-8 font-light"></p>
                    <div id="det-desc" class="text-gray-600 leading-relaxed mb-10 whitespace-pre-wrap text-sm border-t pt-8"></div>
                    <div id="det-buy-box"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="page-admin" class="view min-h-screen bg-gray-50 p-10">
        <div class="max-w-4xl mx-auto">
            <div id="admin-login" class="bg-white p-12 rounded-3xl border shadow-sm text-center">
                <h3 class="font-bold mb-6 tracking-tight">ADMIN ACCESS</h3>
                <input type="password" id="pass" class="border p-4 w-64 rounded-xl mb-4 block mx-auto outline-none" placeholder="Password">
                <button onclick="checkPass()" class="bg-black text-white px-10 py-3 rounded-xl font-bold text-xs uppercase tracking-widest">Login</button>
            </div>

            <div id="admin-panel" class="hidden space-y-8">
                <div class="flex justify-between items-center border-b pb-6">
                    <h2 class="text-2xl font-black italic">DASHBOARD</h2>
                    <button onclick="logout()" class="text-red-500 text-xs font-bold uppercase">Logout</button>
                </div>

                <div class="bg-white p-8 rounded-3xl border shadow-sm space-y-6">
                    <h3 class="font-bold text-sm uppercase tracking-widest text-blue-600">Add Premium Product</h3>
                    
                    <div id="drop-zone" class="drop-zone h-48 rounded-2xl flex flex-col items-center justify-center cursor-pointer">
                        <p class="text-gray-400 text-sm font-medium">Resimleri Buraya Sürükleyin (En az 10 adet eklenebilir)</p>
                        <p class="text-[10px] text-gray-300 mt-2 italic">Resimleriniz images/ klasöründe bu isimlerle hazır olmalıdır.</p>
                        <div id="preview-area" class="flex gap-2 mt-4 flex-wrap px-4"></div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4">
                        <input type="text" id="pTitle" placeholder="Ürün Başlığı" class="border p-4 rounded-xl outline-none text-sm bg-gray-50">
                        <input type="text" id="pPrice" placeholder="Fiyat (Örn: 29.00)" class="border p-4 rounded-xl outline-none text-sm bg-gray-50">
                        <input type="text" id="pSlug" placeholder="Gumroad Slug" class="border p-4 rounded-xl outline-none text-sm bg-gray-50">
                        <select id="pCat" class="border p-4 rounded-xl outline-none text-sm bg-gray-50"></select>
                    </div>
                    <textarea id="pDesc" class="w-full border p-4 rounded-xl h-40 outline-none text-sm bg-gray-50" placeholder="Ürün açıklaması, teknik detaylar, bundle içeriği..."></textarea>
                    
                    <button onclick="saveProduct()" class="btn-black">Ürünü Vitrine Ekle</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let cats = JSON.parse(localStorage.getItem('cats')) || ["Summer", "Vintage", "Bundle"];
        let prods = JSON.parse(localStorage.getItem('prods')) || [];
        let tempImages = [];

        // ROUTING
        function showPage(p) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById('page-' + p).classList.add('active');
            if(p === 'home') renderHome();
        }

        // DROPZONE LOGIC
        const dz = document.getElementById('drop-zone');
        dz.addEventListener('dragover', (e) => { e.preventDefault(); dz.classList.add('active'); });
        dz.addEventListener('dragleave', () => dz.classList.remove('active'));
        dz.addEventListener('drop', (e) => {
            e.preventDefault();
            dz.classList.remove('active');
            const files = Array.from(e.dataTransfer.files);
            files.forEach(file => {
                if(file.type.startsWith('image/')) {
                    tempImages.push(file.name);
                    const reader = new FileReader();
                    reader.onload = (re) => {
                        const img = document.createElement('img');
                        img.src = re.target.result;
                        img.className = "w-12 h-12 object-cover rounded border";
                        document.getElementById('preview-area').appendChild(img);
                    }
                    reader.readAsDataURL(file);
                }
            });
        });

        // ADMIN LOGIC
        function checkPass() {
            if(document.getElementById('pass').value === "admin123") {
                document.getElementById('admin-login').classList.add('hidden');
                document.getElementById('admin-panel').classList.remove('hidden');
                updateCats();
            }
        }

        function updateCats() {
            document.getElementById('pCat').innerHTML = cats.map(c => `<option value="${c}">${c}</option>`).join('');
        }

        function saveProduct() {
            const p = {
                id: Date.now(),
                title: document.getElementById('pTitle').value,
                price: document.getElementById('pPrice').value,
                slug: document.getElementById('pSlug').value,
                cat: document.getElementById('pCat').value,
                desc: document.getElementById('pDesc').value,
                imgs: tempImages
            };
            if(!p.title || tempImages.length === 0) return alert("Başlık ve en az bir resim gereklidir!");
            prods.push(p);
            localStorage.setItem('prods', JSON.stringify(prods));
            alert("Ürün Eklendi! images/ klasörüne resimleri atmayı unutmayın.");
            location.reload();
        }

        // RENDER HOME
        function renderHome(filter = 'All') {
            const grid = document.getElementById('product-grid');
            const nav = document.getElementById('nav-cats');
            
            nav.innerHTML = `<button onclick="renderHome('All')" class="${filter==='All'?'text-black':'text-gray-300'}">All</button>` + 
                cats.map(c => `<button onclick="renderHome('${c}')" class="${filter===c?'text-black underline underline-offset-8':'text-gray-300'}">${c.toUpperCase()}</button>`).join('');

            const filtered = filter === 'All' ? prods : prods.filter(p => p.cat === filter);
            grid.innerHTML = filtered.map(p => `
                <div class="group cursor-pointer" onclick="showDetail(${p.id})">
                    <div class="aspect-[4/5] overflow-hidden rounded-2xl bg-gray-50 border border-gray-100 mb-6 transition-all group-hover:shadow-2xl">
                        <img src="images/${p.imgs[0]}" class="w-full h-full object-cover group-hover:scale-105 transition duration-700">
                    </div>
                    <div class="text-center px-2">
                        <h3 class="text-sm font-bold tracking-tight text-gray-900 truncate">${p.title}</h3>
                        <p class="text-sm text-gray-400 mt-1">$${p.price}</p>
                    </div>
                </div>
            `).join('');
        }

        // SHOW DETAIL
        function showDetail(id) {
            const p = prods.find(x => x.id === id);
            document.getElementById('det-title').innerText = p.title;
            document.getElementById('det-price').innerText = '$' + p.price;
            document.getElementById('det-desc').innerText = p.desc;
            document.getElementById('det-img').src = 'images/' + p.imgs[0];
            
            document.getElementById('det-thumbs').innerHTML = p.imgs.map(img => `
                <img src="images/${img}" onclick="document.getElementById('det-img').src='images/${img}'" class="w-20 h-24 object-cover rounded-lg border cursor-pointer hover:border-black transition">
            `).join('');

            document.getElementById('det-buy-box').innerHTML = `
                <a class="gumroad-button btn-black" href="https://etsycraftsman0.gumroad.com/l/${p.slug}/checkout" data-gumroad-overlay-checkout="true">Purchase Collection</a>
            `;
            showPage('detail');
            if(window.GumroadOverlay) GumroadOverlay.refresh();
        }

        window.onload = () => renderHome();
    </script>
</body>
</html>